{% extends 'base.html.twig' %}

{% block title %}Bienvenue au Jardin des Curieux !
{% endblock %}

{% block body %}
{# Page d'accueil #}

<div class="container w-50 pb-4 text-capitalize">
	{% if is_granted('ROLE_USER') %}
		Bienvenue
		{{ app.user.userIdentifier }}
		!
	{% endif %}


	<p class="fs-3 logo">
		Décoration du jardin !
	</p>
	{% if app.request.method == 'GET' %}

		{% if articles | length == 0 %}
			<h4>Aucun résultat pour votre recherche.</h4>
		{% else %}


			<div class="grid container w-50">

				<form method="GET" class="pb-4">
					<select onchange="this.form.submit();" id="id" name="id" class="form-select" aria-label="Default select example">
						<option selected value="0">Toutes les catégories</option>
						{% for categorie in categories %}

							<option value="{{ categorie.id }}">{{ categorie.name }}</option>

						{% endfor %}
					</select>
				</form>

				{% for article in articles %}

					<div
						class="grid-item">
						{# <a class="text-decoration-none" href="{{ path('detailArticle', {id: article.id })}}"> #}
						<div class="card">


							{% if vich_uploader_asset(article,'coverFile') %}
								<img src="{{ vich_uploader_asset(article,'coverFile')|imagine_filter('vignette') }}" alt="image d'une annonce">
							{% endif %}

							<div class="card-content">
								<h1 class="card-header">{{ article.title }}</h1>
								<p class="desc">{{ article.description | u.truncate(20,'...') }}</p>
								{# <div>
									<p class="info">Acheteur :
										{{ article.user.userIdentifier }}</p>
									<p class="info">Localisation :
										{{ article.owner.city }}</p>
									<p class="info">Prix:
										{{ article.prix }}</p>
									<p class="info">Ajouté le :
										{{ article.updatedAt| date('d-m-Y') }}</p>
									<p class="info">Catégorie :
										{{ article.category.name }}</p>
								</div> #}
							</div>
						</div>
					</a>
				</div>

			{% endfor %}
		</div>
	</div>

	{{ knp_pagination_render(articles) }}

{% endif %}{% endif %}{% endblock %}
