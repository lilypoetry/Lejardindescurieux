
{% extends 'admin_base.html.twig' %}

{% block title %}Administrateur{% endblock %}
{% block stylesheets %}
	{{ parent() }}
	<link href="{{ asset('css/top.css') }}" rel="stylesheet">
{% endblock %}


{% block body %}

<section class="secondSec" id="secondSec">
    {% if app.request.method == 'GET' %}
        {% if articles | length == 0 %}
            <h4>Aucun r√©sultat pour votre recherche.</h4>
        {% else %}
            <div id="article">
                {% if app.request.query.get('query') %}
                    <div class="returnDiv">
                        <a href="{{ path('app_admin') }}" class="return">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M12 20 4 12 12 4 13.425 5.4 7.825 11H20V13H7.825L13.425 18.6Z"/></svg>
                            Retour
                        </a>
                    </div>
                {% endif %}
                {# <form class="d-flex searchBar" role="search" action="{{ path('app_admin') }}">
                    <input class="form-control me-2 search" id="recherche" name="query" type="Rechercher" placeholder="Rechercher" aria-label="Rechercher">
                    <button class="recherche">Recherche</button>
                </form> #}

                <div class="btnAjout">
                    <a href="{{ path('new_article')}}" class="btn btn-outline-success">Ajouter</a>
                </div>
                <table class="tableArticle table-responsive">
                    <thead>
                        <tr>
                            <th>Image</th>
                            <th>Titre</th>
                            <th class="desc">Description</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for article in articles %}
                            <tr>
                                <td class='imageArticle'><img src="imgs/covers/{{ article.cover }}" alt="" width="70px"></td>
                                <td>{{ article.title }}</td>
                                <td class="desc">{{ article.description|u.truncate(50) }}</td>
                                <td>
                                    <div class="action">
                                        <a href="{{ path('admin_edit_article', { id: article.id }) }}" class="btnEdit">Editer</a>
                                        <form action="{{ path('app_admin_article_delete', { id: article.id }) }}" method="post">
                                            <input type="hidden" name="token" value="{{ csrf_token('delete-article-'~ article.id) }}">
                                            <button class="btn btn-sm btn-outline-danger">Supprimer</button>
                                        </form> 
                                    </div>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <div class="paginat">
                    <p>{{ knp_pagination_render(articles) }}</p>
                </div>
            </div>
        {% endif %}
    {% endif %}
</section>
{% endblock %}
